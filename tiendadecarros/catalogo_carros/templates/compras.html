{% extends 'base.html' %}

{% block content %}
<h1>Carrito de Compras</h1>
{% if compra %}
    <ul>
    {% for item in detalles_con_subtotal %}
        <li>
            {{ item.detalle.producto.nombre }} - 
            Cantidad: {{ item.detalle.cantidad }} - 
            Precio Unitario: ${{ item.detalle.precio_unitario }} - 
            Subtotal: ${{ item.subtotal }}
            <!-- Botón para eliminar el producto -->
            <a href="{% url 'eliminar_producto_carrito' item.detalle.id %}" class="btn btn-danger btn-sm" onclick="return confirm('¿Estás seguro de que deseas eliminar este producto?');">
                Eliminar
            </a>
        </li>
    {% endfor %}
    </ul>
    <p>Total: ${{ total }}</p>
    <a href="{% url 'finalizar_compra' %}" class="btn btn-primary">Finalizar Compra</a>
{% else %}
    <p>No hay productos en el carrito.</p>
{% endif %}
{% endblock %}